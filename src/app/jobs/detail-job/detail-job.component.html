
<ng-container *transloco="let t">
    <section class="background-before pb-1" *ngIf="job">
        <div class="container">
            <div class="row py-4">
                <div class="col-sm-6">
                    <h1 class="mb-0"> {{ job.function }} </h1>
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item">
                            <p class="place color-white mb-0"> {{ t('PLACE:') }} {{job.city}},</p>
                        </li>
                        <li class="list-inline-item">
                            <p class="date mb-0 color-white"> {{ this.helpersS.postedAt(job.filed_ago) }} </p>
                        </li>
                    </ul>
                </div>
                <div class="col-sm-6 d-flex align-items-center justify-content-end mr-0">
                    <button class="btn primary px-4 mr-2"  *ngIf="job.isMine && job.active && job.renew" (click)="extendAd()">
                        <ng-container> {{ t('EXTEND_THE_AD') }} </ng-container>
                    </button>
                    <button class="btn secondary success px-4 mr-3" *ngIf="job.isMine && !job.active" (click)="extendAd()">
                        <ng-container> {{ t('PAY_THE_AD') }} </ng-container>
                    </button>
                    <button class="btn secondary px-4" *ngIf="job.isMine" (click)="onDeleteJob()">
                        {{ t('DELETE_THIS_AD') }}
                    </button>
                </div>  
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-sm-8 mb-3">
                    <div class="white-background-color border-raduis-15 mb-3 p-sm-5 position-relative ">
                        <p [innerHTML]="job.description" ></p>
                        <a routerLink="{{job.user.company_name}}/signaler" class="primary float-right" *ngIf="!job.isMine">
                            <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="fill" d="M10.4833 3.26744L15.2298 11.1732C15.912 12.3086 15.5769 13.8025 14.4811 14.5094C14.1133 14.7475 13.6846 14.8745 13.2465 14.8749H3.75271C2.46283 14.8749 1.41663 13.7912 1.41663 12.4531C1.41663 12.0005 1.53917 11.5578 1.76938 11.1732L6.51663 3.26744C7.19804 2.13198 8.63879 1.78419 9.73458 2.49111C10.0378 2.68661 10.2942 2.95223 10.4833 3.26744ZM8.91079 3.86173C8.82408 3.80596 8.72695 3.76834 8.62529 3.75115C8.52363 3.73396 8.41954 3.73755 8.31931 3.76172C8.21907 3.78588 8.12478 3.83011 8.04212 3.89174C7.95946 3.95337 7.89015 4.03111 7.83838 4.12027L3.09183 12.0274C3.01473 12.1563 2.97409 12.3037 2.97425 12.4538C2.97425 12.9001 3.32275 13.2613 3.75342 13.2613H13.2458C13.3917 13.2613 13.5341 13.2188 13.6573 13.1395C13.8342 13.022 13.9589 12.8408 14.0055 12.6336C14.0521 12.4264 14.0169 12.2093 13.9074 12.0274L9.16083 4.12027C9.09858 4.01617 9.01328 3.92772 8.9115 3.86173H8.91079ZM8.49996 12.0416C8.3121 12.0416 8.13193 11.9669 7.99909 11.8341C7.86625 11.7013 7.79163 11.5211 7.79163 11.3332C7.79163 11.1454 7.86625 10.9652 7.99909 10.8324C8.13193 10.6995 8.3121 10.6249 8.49996 10.6249C8.68782 10.6249 8.86799 10.6995 9.00083 10.8324C9.13366 10.9652 9.20829 11.1454 9.20829 11.3332C9.20829 11.5211 9.13366 11.7013 9.00083 11.8341C8.86799 11.9669 8.68782 12.0416 8.49996 12.0416ZM8.49996 5.66657C8.68782 5.66657 8.86799 5.74119 9.00083 5.87403C9.13366 6.00687 9.20829 6.18704 9.20829 6.3749V9.20823C9.20829 9.3961 9.13366 9.57626 9.00083 9.7091C8.86799 9.84194 8.68782 9.91657 8.49996 9.91657C8.3121 9.91657 8.13193 9.84194 7.99909 9.7091C7.86625 9.57626 7.79163 9.3961 7.79163 9.20823V6.3749C7.79163 6.18704 7.86625 6.00687 7.99909 5.87403C8.13193 5.74119 8.3121 5.66657 8.49996 5.66657Z" fill="#F39908"/>
                            </svg>    
                             {{ t('REPORT_ABUSE') }} </a>
                        <a *ngIf="job.isMine" (click)="editDescription()" class="secondary link_edit bottom">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="fill" d="M16.6764 0.100586C16.2538 0.101609 15.8356 0.18629 15.446 0.349744C15.0563 0.513198 14.7029 0.752189 14.4061 1.05293L2.05215 13.4061L2.00371 13.6506L1.14902 17.9475L0.905273 19.0943L2.05293 18.8506L6.3498 17.9959L6.59355 17.9467L18.9475 5.59355C19.249 5.29724 19.4885 4.94385 19.652 4.55398C19.8155 4.16412 19.8996 3.7456 19.8996 3.32285C19.8996 2.9001 19.8155 2.48158 19.652 2.09172C19.4885 1.70186 19.249 1.34846 18.9475 1.05215C18.6505 0.751455 18.2969 0.512555 17.9071 0.349233C17.5173 0.185912 17.099 0.101404 16.6764 0.100586ZM16.6764 1.58965C17.0701 1.58965 17.467 1.76934 17.8482 2.15137C18.6084 2.91074 18.6084 3.73496 17.8482 4.49512L17.2873 5.03184L14.967 2.7123L15.5045 2.15137C15.8865 1.76934 16.2826 1.58965 16.6764 1.58965ZM13.8693 3.81152L16.1881 6.13105L6.74043 15.5779C6.23039 14.58 5.41838 13.7685 4.42012 13.2592L13.8693 3.81152ZM3.42012 14.5295C3.88249 14.7155 4.3025 14.9931 4.65491 15.3455C5.00733 15.6979 5.28488 16.1179 5.4709 16.5803L2.90684 17.0928L3.42012 14.5295Z" fill="#607D8B"/>
                            </svg>                                
                        </a>
                    </div>

                    <div class="card w-100 mb-3">
                        <div class="header">{{ t('JOB_DETAILS') }}</div>
                        <div class="body">
                            <table>
                                <tbody>
                                    <tr>
                                        <th> {{ t('PLACE:') }} </th>
                                        <td>{{ job.address }}</td>
                                    </tr>
                                    <tr>
                                        <th> {{ t('REQUIRED_SKILLS') }} </th>
                                        <td>
                                            {{ job.competences }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th> {{ t('CONTRACT_TYPE') }} </th>
                                        <td>{{job.contract_type?.name}}</td>
                                    </tr>
                                    <tr>
                                        <th> {{ t('LANGUAGES') }} </th>
                                        <td>
                                            <ng-container *ngFor="let language of job.languages, let last = last">
                                                {{ language.name }}{{ last ? '' : ','  }}
                                            </ng-container>
                                        </td>
                                    </tr>    
                                </tbody>
                                
                            </table>
                            <a *ngIf="job.isMine" (click)="editDetails()" class="secondary link_edit">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path class="fill" d="M16.6764 0.100586C16.2538 0.101609 15.8356 0.18629 15.446 0.349744C15.0563 0.513198 14.7029 0.752189 14.4061 1.05293L2.05215 13.4061L2.00371 13.6506L1.14902 17.9475L0.905273 19.0943L2.05293 18.8506L6.3498 17.9959L6.59355 17.9467L18.9475 5.59355C19.249 5.29724 19.4885 4.94385 19.652 4.55398C19.8155 4.16412 19.8996 3.7456 19.8996 3.32285C19.8996 2.9001 19.8155 2.48158 19.652 2.09172C19.4885 1.70186 19.249 1.34846 18.9475 1.05215C18.6505 0.751455 18.2969 0.512555 17.9071 0.349233C17.5173 0.185912 17.099 0.101404 16.6764 0.100586ZM16.6764 1.58965C17.0701 1.58965 17.467 1.76934 17.8482 2.15137C18.6084 2.91074 18.6084 3.73496 17.8482 4.49512L17.2873 5.03184L14.967 2.7123L15.5045 2.15137C15.8865 1.76934 16.2826 1.58965 16.6764 1.58965ZM13.8693 3.81152L16.1881 6.13105L6.74043 15.5779C6.23039 14.58 5.41838 13.7685 4.42012 13.2592L13.8693 3.81152ZM3.42012 14.5295C3.88249 14.7155 4.3025 14.9931 4.65491 15.3455C5.00733 15.6979 5.28488 16.1179 5.4709 16.5803L2.90684 17.0928L3.42012 14.5295Z" fill="#607D8B"/>
                                </svg>                                
                            </a>
                        </div>
                    </div>
                    <button class="btn secondary mt-3 px-4" *ngIf="!job.isMine" routerLink="/jobs/{{job.slug}}/postuler"> {{ t('APPLY')}} </button>
                </div>
                <div class="col-sm-4 pl-1 mb-3">
                    <div class="card w-100 mb-4">
                        <div class="header">
                            {{ t('ABOUT_THE_AUTHOR') }}
                        </div>
                        <div class="body p-3">
                            <div class="d-flex">
                                <div class="profile_picture background-center-cover" [ngStyle]="{'background-image': 'url(' +  profileImgUrl + job.user.profile_picture + ')'}" ></div>
                                <div>
                                    <p class="size-13">
                                        {{ job.user.company_name }}
                                        <br> {{ job.user.vat }}
                                        <br> {{ job.user.company_address }}
                                    </p>
                                    <ngb-rating class="rate" [(rate)]="job.user.score" [readonly]="true" [max]=5></ngb-rating>
                                </div>
                            </div>
                            <p> {{ job.user.presentation }} </p>
                            <button class="btn primary px-4" (click)="setRouter('/'+job.user.slug)" > {{ t('MORE_INFORMATIONS') }} </button>
                            <a *ngIf="job.isMine" routerLink="/me" class="secondary link_edit">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path class="fill" d="M16.6764 0.100586C16.2538 0.101609 15.8356 0.18629 15.446 0.349744C15.0563 0.513198 14.7029 0.752189 14.4061 1.05293L2.05215 13.4061L2.00371 13.6506L1.14902 17.9475L0.905273 19.0943L2.05293 18.8506L6.3498 17.9959L6.59355 17.9467L18.9475 5.59355C19.249 5.29724 19.4885 4.94385 19.652 4.55398C19.8155 4.16412 19.8996 3.7456 19.8996 3.32285C19.8996 2.9001 19.8155 2.48158 19.652 2.09172C19.4885 1.70186 19.249 1.34846 18.9475 1.05215C18.6505 0.751455 18.2969 0.512555 17.9071 0.349233C17.5173 0.185912 17.099 0.101404 16.6764 0.100586ZM16.6764 1.58965C17.0701 1.58965 17.467 1.76934 17.8482 2.15137C18.6084 2.91074 18.6084 3.73496 17.8482 4.49512L17.2873 5.03184L14.967 2.7123L15.5045 2.15137C15.8865 1.76934 16.2826 1.58965 16.6764 1.58965ZM13.8693 3.81152L16.1881 6.13105L6.74043 15.5779C6.23039 14.58 5.41838 13.7685 4.42012 13.2592L13.8693 3.81152ZM3.42012 14.5295C3.88249 14.7155 4.3025 14.9931 4.65491 15.3455C5.00733 15.6979 5.28488 16.1179 5.4709 16.5803L2.90684 17.0928L3.42012 14.5295Z" fill="#607D8B"/>
                                </svg>                                
                            </a>
                        </div>
                    </div>

                    <div class="card w-100" *ngIf="job.tel || job.email_contact ">
                        <div class="header">
                            {{ t('QUESTIONS_ABOUT_THIS_JOB') }}
                        </div>
                        <div class="body p-3">
                            <ul class="list-inline mb-0">
                                <li class="my-1" *ngIf="job.tel">
                                    <svg class="mr-2" width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 29C22.5081 29 29 22.5081 29 14.5C29 6.49188 22.5081 0 14.5 0C6.49188 0 0 6.49188 0 14.5C0 22.5081 6.49188 29 14.5 29ZM10.4303 19.5696C12.8361 21.9753 16.0977 23.3289 19.5 23.3333C20.5124 23.3422 21.4872 22.9502 22.2116 22.243C22.936 21.5357 23.3513 20.5706 23.3666 19.5582C23.3669 19.3461 23.3502 19.1343 23.3167 18.9249C23.3035 18.8475 23.288 18.7706 23.2699 18.6943C23.2396 18.5665 23.2023 18.4404 23.1583 18.3166C23.1125 18.1828 23.0334 18.0629 22.9284 17.9681C22.8234 17.8734 22.696 17.8069 22.5583 17.7749L17.5583 16.6332C17.4226 16.6025 17.2813 16.6062 17.1474 16.644C17.0135 16.6819 16.8912 16.7527 16.7916 16.8499C16.675 16.9583 16.6666 16.9666 16.125 17.9999C14.3276 17.1717 12.8875 15.7256 12.0667 13.9249C13.0917 13.3916 13.1 13.3832 13.2083 13.2666C13.3056 13.1671 13.3763 13.0447 13.4142 12.9108C13.452 12.7769 13.4557 12.6356 13.425 12.4999L12.2833 7.49994C12.2552 7.3576 12.1905 7.2251 12.0955 7.11548C12.0005 7.00586 11.8785 6.92297 11.7416 6.87494C11.5471 6.80542 11.3461 6.75519 11.1417 6.72491C10.9302 6.68451 10.7153 6.66498 10.5 6.66656C9.48334 6.66656 8.5083 7.07043 7.78943 7.78937C7.0705 8.50824 6.66663 9.48328 6.66663 10.4999C6.67108 13.9022 8.02454 17.1638 10.4303 19.5696Z" fill="#F39908"/>
                                    </svg>                                                                           
                                    <a href="tel:{{ job.tel }}" class="secondary">{{ job.tel }}</a>                               
                                </li>
                                <li class="my-1" *ngIf="job.email_contact">
                                    <svg class="mr-2" width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M29 14.5C29 22.5081 22.5081 29 14.5 29C6.49188 29 0 22.5081 0 14.5C0 6.49188 6.49188 0 14.5 0C22.5081 0 29 6.49188 29 14.5ZM8.5 8.125C7.77063 8.125 7.07117 8.41473 6.55548 8.93048C6.03973 9.44617 5.75 10.1456 5.75 10.875V11.1514L14 15.594L22.25 11.1528V10.875C22.25 10.1456 21.9603 9.44617 21.4445 8.93048C20.9288 8.41473 20.2294 8.125 19.5 8.125H8.5ZM14.3259 16.9803L22.25 12.7137V19.1253C22.25 19.8547 21.9603 20.5541 21.4445 21.0699C20.9288 21.5856 20.2294 21.8753 19.5 21.8753H8.5C7.77063 21.8753 7.07117 21.5856 6.55548 21.0699C6.03973 20.5541 5.75 19.8547 5.75 19.1253V12.7137L13.6741 16.9803C13.7743 17.0342 13.8862 17.0625 14 17.0625C14.1138 17.0625 14.2257 17.0342 14.3259 16.9803Z" fill="#F39908"/>
                                    </svg>                                    
                                    <a href="mailto:{{ job.email_contact }}" class="secondary">{{ job.email_contact }}</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>
                
            </div>
        </div>
    </section>
</ng-container>