<div class="row" *transloco="let t">
    <div class="col-12" *ngIf="!conversationId">
        <div class="white-background-color border-raduis-15 custom-padding min-height-500 d-flex align-items-center justify-content-center">
            <div class="text-center p-5">
                <h4 [innerHTML]="t('ONE_OR_MORE_PROVIDERS_ARE_INTERESTED_BY_YOU_PROJECT')"></h4>
                <h5 [innerHTML]="t('CLICK_ON_THE_OFFER_TO_DISCUSS_WITH_THE_APPLICANT')" class="mb-4"></h5>
                <img src="./../../assets/img/arraw.svg" alt="" class="img-fluid">
            </div>
        </div>
    </div>

    <div class="col-sm-8" *ngIf="conversationId">
        <div class=" white-background-color border-raduis-15 px-5">
            <div class="row" *ngIf="conversation.project">
                <div class="col-sm-7 border-bottom px-0 d-flex align-items-center py-4" *ngIf="conversation.sender" >
                    <div class="profile_picture_assign background-center-cover mr-5 py-4" [ngStyle]="{'background-image': 'url(' +  profileImgUrl + conversation.sender.profile_picture + ')'}"></div>
                    <p class="mb-1 size-12"> {{conversation.sender.company_name}} </p>
                </div>
                <div class="col-sm-5 border-bottom px-0 text-right py-4" *ngIf="conversation.project.status.name == 'OPEN'">
                    <div class="mb-2">
                        <a class="light mr-2" (click)="onDeleteConversation()">
                            <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="fill" d="M5.625 5.625H6.5625V11.25H5.625V5.625Z" fill="#607D8B"/>
                                <path class="fill" d="M8.4375 5.625H9.375V11.25H8.4375V5.625Z" fill="#607D8B"/>
                                <path class="fill" d="M1.875 2.8125V3.75H2.8125V13.125C2.8125 13.3736 2.91127 13.6121 3.08709 13.7879C3.2629 13.9637 3.50136 14.0625 3.75 14.0625H11.25C11.4986 14.0625 11.7371 13.9637 11.9129 13.7879C12.0887 13.6121 12.1875 13.3736 12.1875 13.125V3.75H13.125V2.8125H1.875ZM3.75 13.125V3.75H11.25V13.125H3.75Z" fill="#607D8B"/>
                                <path class="fill" d="M5.625 0.9375H9.375V1.875H5.625V0.9375Z" fill="#607D8B"/>
                            </svg>                                
                        </a>
                        <a (click)="onPinConversation()"
                        [ngClass]="conversation.pinned ? 'primary' : 'light'">
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path class="fill" d="M8.059 0.444699C7.89335 0.278598 7.69106 0.153663 7.46837 0.0799296C7.24567 0.00619651 7.00879 -0.0142789 6.77675 0.0201481C6.54471 0.054575 6.32398 0.142945 6.13229 0.278158C5.94059 0.413371 5.78329 0.591659 5.673 0.798699L3.653 4.5887L0.842 5.5257C0.761082 5.55258 0.688381 5.5997 0.630808 5.6626C0.573235 5.72549 0.532701 5.80206 0.513061 5.88503C0.49342 5.968 0.495324 6.05462 0.518592 6.13665C0.54186 6.21868 0.585719 6.2934 0.646 6.3537L2.793 8.4997L0.146 11.1467L0 11.9997L0.854 11.8537L3.5 9.2067L5.646 11.3537C5.7063 11.414 5.78102 11.4578 5.86305 11.4811C5.94508 11.5044 6.03169 11.5063 6.11467 11.4866C6.19764 11.467 6.27421 11.4265 6.3371 11.3689C6.4 11.3113 6.44712 11.2386 6.474 11.1577L7.411 8.3477L11.19 6.3237C11.396 6.2132 11.5733 6.05609 11.7078 5.86492C11.8422 5.67374 11.9302 5.45378 11.9646 5.22258C11.999 4.99138 11.9788 4.75535 11.9058 4.53331C11.8328 4.31127 11.7089 4.10936 11.544 3.9437L8.06 0.443699L8.059 0.444699ZM6.555 1.2687C6.59174 1.19957 6.6442 1.14003 6.70815 1.09487C6.7721 1.04972 6.84577 1.02022 6.92321 1.00874C7.00065 0.997257 7.07971 1.00412 7.15401 1.02878C7.22831 1.05344 7.29579 1.0952 7.351 1.1507L10.836 4.6487C10.8911 4.70392 10.9325 4.77126 10.9569 4.84535C10.9814 4.91944 10.9881 4.99821 10.9766 5.07537C10.9652 5.15253 10.9358 5.22593 10.8909 5.28972C10.846 5.3535 10.7868 5.40589 10.718 5.4427L6.764 7.5587C6.65142 7.61915 6.56626 7.72042 6.526 7.8417L5.782 10.0747L1.926 6.2187L4.158 5.4747C4.27963 5.43396 4.38094 5.34804 4.441 5.2347L6.555 1.2697V1.2687Z" fill="#607D8B"/>
                            </svg>                              
                        </a>
                    </div>
                    <button class="btn primary px-2 right" (click)="onAssignProject()"> {{ t('CHOOSE_THIS_PROVIDER') }} </button>
                </div>
                <div class="col-sm-5 text-right pr-5 border-bottom"  *ngIf="conversation.project.status.name == 'ASSIGNED' && conversation.isAssignedToMe ">
                    <div class="svg">
                        <svg width="48" height="70" viewBox="0 0 48 70" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M24.0002 69.1663C37.1851 69.1663 47.9168 58.4346 47.9168 45.2497C47.9168 32.0648 37.1851 21.333 24.0002 21.333C10.8118 21.333 0.0834961 32.0648 0.0834961 45.2497C0.0834961 58.4346 10.8118 69.1663 24.0002 69.1663ZM24.0002 28.1663C33.4199 28.1663 41.0835 35.8299 41.0835 45.2497C41.0835 54.6694 33.4199 62.333 24.0002 62.333C14.5804 62.333 6.91683 54.6694 6.91683 45.2497C6.91683 35.8299 14.5804 28.1663 24.0002 28.1663ZM20.5835 0.833008H6.91683V19.6862C11.0055 16.9502 15.6935 15.2402 20.5835 14.7013V0.833008ZM41.0835 0.833008H27.4168V14.7013C32.3069 15.2402 36.9948 16.9502 41.0835 19.6862V0.833008Z" fill="#113B3A"/>
                            <path d="M17.2318 48.0206L15.6328 57.3344L24.0002 52.9372L32.3676 57.3344L30.7686 48.0206L37.5405 41.4196L28.1856 40.0598L24.0002 31.583L19.8148 40.0598L10.46 41.4196L17.2318 48.0206Z" fill="#113B3A"/>
                        </svg>  
                    </div>  
                </div>
            </div>
            <div class="conversation pt-3" #scrollMe [scrollTop]="scrollMe.scrollHeight">
                <ng-container *ngFor="let message of conversation.messages; let last = last; let first = first; let index = index" >
                    <div class="message position-relative">
                        <div class="profile_picture background-center-cover mb-2" [ngStyle]="{'background-image': 'url(' +  profileImgUrl + message.sender_profile_picture + ')'}"></div>
                        <p [innerHTML]="message.message" ></p>
                        <ul class="list-inline">
                            <li *ngFor="let file of message.files" > <a class="primary" (click)="downloadFile(file.name, file.path)" > {{ file.name }} </a> </li>
                        </ul>
                        <div class="read_information" >
                            <svg *ngIf="!conversation.status[index].read"  width="13" height="8" viewBox="0 0 13 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill="#607D8B" d="M6.96991 0.970043C7.11078 0.835932 7.29824 0.76179 7.49273 0.763262C7.68722 0.764733 7.87354 0.841703 8.01236 0.977931C8.15118 1.11416 8.23165 1.29899 8.23679 1.49342C8.24193 1.68785 8.17134 1.87667 8.03991 2.02004L4.04991 7.01004C3.9813 7.08394 3.8985 7.14325 3.80645 7.18441C3.71439 7.22557 3.61498 7.24775 3.51416 7.24962C3.41334 7.25149 3.31318 7.233 3.21967 7.19528C3.12616 7.15755 3.04121 7.10135 2.96991 7.03004L0.323913 4.38404C0.250226 4.31538 0.191124 4.23258 0.150132 4.14058C0.10914 4.04858 0.0870986 3.94927 0.0853218 3.84857C0.083545 3.74786 0.10207 3.64783 0.139791 3.55445C0.177512 3.46106 0.233656 3.37622 0.304875 3.305C0.376094 3.23379 0.460928 3.17764 0.554316 3.13992C0.647704 3.1022 0.747733 3.08367 0.848436 3.08545C0.949139 3.08723 1.04845 3.10927 1.14045 3.15026C1.23245 3.19125 1.31525 3.25036 1.38391 3.32404L3.47791 5.41704L6.94991 0.992043C6.95614 0.984323 6.96282 0.976976 6.96991 0.970043ZM6.04991 6.11004L6.96991 7.03004C7.0412 7.10119 7.12608 7.15726 7.2195 7.1949C7.31292 7.23253 7.41296 7.25097 7.51366 7.2491C7.61436 7.24723 7.71365 7.22511 7.80561 7.18403C7.89757 7.14296 7.98032 7.08379 8.04891 7.01004L12.0409 2.02004C12.1126 1.94924 12.1693 1.86472 12.2077 1.77152C12.246 1.67832 12.2651 1.57835 12.2639 1.47758C12.2628 1.37682 12.2413 1.27732 12.2008 1.18504C12.1603 1.09276 12.1017 1.00958 12.0283 0.940472C11.955 0.871365 11.8685 0.817747 11.7739 0.782819C11.6794 0.747891 11.5788 0.732371 11.4782 0.737184C11.3775 0.741998 11.2789 0.767047 11.1881 0.810835C11.0973 0.854623 11.0163 0.916253 10.9499 0.992043L7.47691 5.41704L6.99191 4.93104L6.04891 6.11004H6.04991Z"/>
                            </svg>             
                            <svg *ngIf="conversation.status[index].read"  width="13" height="8" viewBox="0 0 13 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill="#00ABE1" d="M6.96991 0.970043C7.11078 0.835932 7.29824 0.76179 7.49273 0.763262C7.68722 0.764733 7.87354 0.841703 8.01236 0.977931C8.15118 1.11416 8.23165 1.29899 8.23679 1.49342C8.24193 1.68785 8.17134 1.87667 8.03991 2.02004L4.04991 7.01004C3.9813 7.08394 3.8985 7.14325 3.80645 7.18441C3.71439 7.22557 3.61498 7.24775 3.51416 7.24962C3.41334 7.25149 3.31318 7.233 3.21967 7.19528C3.12616 7.15755 3.04121 7.10135 2.96991 7.03004L0.323913 4.38404C0.250226 4.31538 0.191124 4.23258 0.150132 4.14058C0.10914 4.04858 0.0870986 3.94927 0.0853218 3.84857C0.083545 3.74786 0.10207 3.64783 0.139791 3.55445C0.177512 3.46106 0.233656 3.37622 0.304875 3.305C0.376094 3.23379 0.460928 3.17764 0.554316 3.13992C0.647704 3.1022 0.747733 3.08367 0.848436 3.08545C0.949139 3.08723 1.04845 3.10927 1.14045 3.15026C1.23245 3.19125 1.31525 3.25036 1.38391 3.32404L3.47791 5.41704L6.94991 0.992043C6.95614 0.984323 6.96282 0.976976 6.96991 0.970043ZM6.04991 6.11004L6.96991 7.03004C7.0412 7.10119 7.12608 7.15726 7.2195 7.1949C7.31292 7.23253 7.41296 7.25097 7.51366 7.2491C7.61436 7.24723 7.71365 7.22511 7.80561 7.18403C7.89757 7.14296 7.98032 7.08379 8.04891 7.01004L12.0409 2.02004C12.1126 1.94924 12.1693 1.86472 12.2077 1.77152C12.246 1.67832 12.2651 1.57835 12.2639 1.47758C12.2628 1.37682 12.2413 1.27732 12.2008 1.18504C12.1603 1.09276 12.1017 1.00958 12.0283 0.940472C11.955 0.871365 11.8685 0.817747 11.7739 0.782819C11.6794 0.747891 11.5788 0.732371 11.4782 0.737184C11.3775 0.741998 11.2789 0.767047 11.1881 0.810835C11.0973 0.854623 11.0163 0.916253 10.9499 0.992043L7.47691 5.41704L6.99191 4.93104L6.04891 6.11004H6.04991Z"/>
                            </svg>                                        
                        </div>
                    </div>
                    <hr *ngIf="!last" >
                </ng-container>
            </div>
            <form [formGroup]="sendForm" class="write_message d-flex py-3" (ngSubmit)="onSendFormSubmit()"  >
                
                <div class="textarea w-100">
                    <mat-form-field appearance="outline">
                        <textarea matInput formControlName="message" placeholder="{{ t('TYPE_YOUR_MESSAGE') }}" ></textarea>
                    </mat-form-field>
                </div>

                <input #selectFile type="file" accept="image/*" multiple class="d-none"
                    (change)="onUploadFiles($event)">
                <a class="light attach_file" (click)="selectFile.click()">
                    <svg width="20" height="12" viewBox="0 0 20 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path class="fill" d="M5.41667 11.4844C3.93518 11.4844 2.66204 10.9531 1.59722 9.89062C0.532407 8.82812 0 7.53125 0 6C0 4.46875 0.532407 3.17188 1.59722 2.10938C2.66204 1.04688 3.93518 0.515625 5.41667 0.515625H15.787C16.8981 0.515625 17.8395 0.90625 18.6111 1.6875C19.3827 2.46875 19.7685 3.40625 19.7685 4.5C19.7685 5.59375 19.3827 6.53125 18.6111 7.3125C17.8395 8.09375 16.8981 8.48438 15.787 8.48438H7.40741C6.72839 8.48438 6.14969 8.24219 5.6713 7.75781C5.1929 7.27344 4.9537 6.6875 4.9537 6C4.9537 5.3125 5.1929 4.72656 5.6713 4.24219C6.14969 3.75781 6.72839 3.51562 7.40741 3.51562H14.8148V5.01562H7.40741C7.12963 5.01562 6.89815 5.10938 6.71296 5.29688C6.52778 5.48438 6.43518 5.71875 6.43518 6C6.43518 6.28125 6.52778 6.51562 6.71296 6.70312C6.89815 6.89062 7.12963 6.98438 7.40741 6.98438H15.787C16.466 6.98438 17.0525 6.74219 17.5463 6.25781C18.0401 5.77344 18.287 5.1875 18.287 4.5C18.287 3.8125 18.0401 3.22656 17.5463 2.74219C17.0525 2.25781 16.466 2.01562 15.787 2.01562H5.41667C4.33642 2.01562 3.41049 2.40625 2.63889 3.1875C1.86728 3.96875 1.48148 4.90625 1.48148 6C1.48148 7.09375 1.86728 8.03125 2.63889 8.8125C3.41049 9.59375 4.33642 9.98438 5.41667 9.98438H14.8148V11.4844H5.41667Z" fill="#607D8B"/>
                    </svg>                                
                </a>
                <button type="submit" #submit class="d-none" ></button>
                <div class="action pl-3">
                    <a class="secondary" (click)="submit.click()">
                        <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path class="fill" d="M24.4499 11.1095L2.44988 0.109518C2.27745 0.0232848 2.08377 -0.011267 1.89216 0.0100231C1.70055 0.0313133 1.51918 0.107538 1.36988 0.229518C1.22731 0.349011 1.12089 0.505905 1.06259 0.682562C1.0043 0.859219 0.996432 1.04864 1.03988 1.22952L3.99988 11.9995L0.999884 22.7395C0.959111 22.8906 0.954351 23.0491 0.985989 23.2023C1.01763 23.3555 1.08478 23.4992 1.18204 23.6218C1.27931 23.7443 1.40398 23.8423 1.54602 23.908C1.68806 23.9736 1.84352 24.0049 1.99988 23.9995C2.15643 23.9986 2.31056 23.9609 2.44988 23.8895L24.4499 12.8895C24.6137 12.8056 24.7512 12.6781 24.8471 12.5211C24.9431 12.364 24.9939 12.1836 24.9939 11.9995C24.9939 11.8155 24.9431 11.635 24.8471 11.478C24.7512 11.3209 24.6137 11.1934 24.4499 11.1095ZM3.54988 21.1095L5.75988 12.9995H14.9999V10.9995H5.75988L3.54988 2.88952L21.7599 11.9995L3.54988 21.1095Z" fill="#113B3A"/>
                        </svg>
                    </a>
                </div>
            </form>
            <ul class="list-inline selected_images mb-0">
                <li *ngFor="let file of conversationfiles; let i = index">
                    {{ file.name }} 
                    <a (click)="deleteFile(i)" class="secondary ml-2">
                        <svg width="15" height="15" viewBox="0 0 15 15" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path class="stroke" d="M10.1004 7.5H4.90039" stroke="#113B3A"
                                stroke-width="1.5" stroke-linecap="round" />
                            <path class="stroke"
                                d="M7.5 14C11.0899 14 14 11.0899 14 7.5C14 3.91015 11.0899 1 7.5 1C3.91015 1 1 3.91015 1 7.5C1 11.0899 3.91015 14 7.5 14Z"
                                stroke="#113B3A" stroke-width="1.5" />
                        </svg>
                    </a> 
                </li>
            </ul>
        </div>
    </div>
    <div class="col-sm-4" *ngIf="conversationId">
        <div class="white-background-color border-raduis-15 custom-padding profile_details text-center" *ngIf="conversation.sender">
            <div class="profile_picture_detail background-center-cover mb-3" [ngStyle]="{'background-image': 'url(' +  profileImgUrl + conversation.sender.profile_picture + ')'}"></div>
            <p class="mb-1 size-12"> {{conversation.sender.company_name}} </p>
            <ngb-rating class="rate" [(rate)]="conversation.sender.score" [readonly]="true" [max]=5></ngb-rating>
            <button class="btn primary px-4 center mt-4" (click)="setRouter('/'+conversation.sender.slug)" > {{ t('SEE_PROFILE') }} </button>
        </div>
    </div>
</div>